<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LibroMarket Pro | Shop & Sell</title>
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.12);
            --glass-heavy: rgba(255, 255, 255, 0.2);
            --accent: #d4a373;
            --accent-light: #e9edc9;
            --success: #2a9d8f;
            --danger: #e76f51;
            --gold: #ffca08;
            --dark: #1a1a1a;
            --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            background: linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.85)),
                url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?auto=format&fit=crop&q=80&w=2000');
            background-size: cover;
            background-attachment: fixed;
            color: white;
            min-height: 100vh;
            line-height: 1.6;
        }

        /* --- UI Components --- */
        #auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(15px);
        }

        .auth-card {
            background: #222;
            padding: 50px;
            border-radius: 20px;
            width: 400px;
            text-align: center;
            border: 1px solid var(--accent);
            box-shadow: var(--shadow);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px;
            background: var(--glass);
            backdrop-filter: blur(15px);
            margin-bottom: 30px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        /* --- Stats Dashboard --- */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--glass);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid var(--accent);
        }

        .stat-card h4 {
            margin: 0;
            font-size: 0.9em;
            text-transform: uppercase;
            color: var(--accent);
        }

        .stat-card p {
            margin: 5px 0 0;
            font-size: 1.8em;
            font-weight: bold;
        }

        /* --- Forms & Inputs --- */
        .admin-section {
            background: var(--glass);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        input,
        select,
        textarea {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 1rem;
        }

        input:focus {
            outline: 2px solid var(--accent);
        }

        /* --- Library Grid --- */
        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            align-items: center;
        }

        .book-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }

        .book-card {
            background: rgba(255, 255, 255, 0.07);
            border-radius: 15px;
            padding: 25px;
            transition: transform 0.3s, background 0.3s;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .book-card:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.12);
        }

        .book-tag {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: black;
            padding: 2px 10px;
            border-radius: 20px;
            font-size: 0.7em;
            font-weight: bold;
        }

        /* --- Buttons --- */
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-accent {
            background: var(--accent);
            color: #1a1a1a;
        }

        .btn-accent:hover {
            background: #b88a5d;
        }

        .btn-cart {
            background: var(--success);
            color: white;
            margin-top: 10px;
            width: 100%;
        }

        .btn-remove {
            background: transparent;
            border: 1px solid var(--danger);
            color: var(--danger);
            margin-top: 8px;
            width: 100%;
        }

        .btn-remove:hover {
            background: var(--danger);
            color: white;
        }

        /* --- Sidebar --- */
        #cart-panel {
            position: fixed;
            right: -450px;
            top: 0;
            width: 400px;
            height: 100%;
            background: #111;
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.8);
            transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            padding: 40px;
            box-sizing: border-box;
            border-left: 1px solid var(--accent);
        }

        #cart-panel.open {
            right: 0;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        /* Reading Goal Tracker */
        .reading-goal {
            background: var(--glass);
            padding: 20px;
            border-radius: 15px;
            margin-top: 40px;
            text-align: center;
        }

        .progress-container {
            background: #444;
            height: 10px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .progress-bar {
            background: var(--success);
            height: 100%;
            width: 45%;
            border-radius: 5px;
            transition: width 1s ease-in-out;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-in {
            animation: fadeIn 0.5s forwards;
        }
    </style>
</head>

<body>

    <div id="auth-overlay">
        <div class="auth-card">
            <div style="font-size: 3em; margin-bottom: 10px;">üìö</div>
            <h2 id="auth-title">Welcome Back</h2>
            <p style="color: #888; margin-bottom: 25px;">The world's premier book exchange</p>
            <input type="text" id="auth-user" placeholder="Username"><br><br>
            <input type="password" id="auth-pass" placeholder="Password"><br><br>
            <button class="btn btn-accent" id="auth-btn" onclick="handleAuth()" style="width: 100%">Login to
                Library</button>
            <p onclick="toggleAuthMode()" id="toggle-link"
                style="cursor:pointer; font-size:0.9em; margin-top:20px; color: var(--accent)">Need an account? Join the
                Club</p>
        </div>
    </div>

    <div class="container" id="main-app">
        <nav>
            <div>
                <h2 style="margin:0">LibroMarket <span
                        style="font-size: 0.5em; color: var(--accent); vertical-align: middle; border: 1px solid var(--accent); padding: 2px 5px; border-radius: 4px;">PRO</span>
                </h2>
                <small id="welcome-msg" style="color: var(--accent)"></small>
            </div>
            <div style="display: flex; gap: 15px; align-items: center;">
                <button class="btn btn-accent" onclick="toggleCart()">üõí Cart (<span id="cart-count">0</span>)</button>
                <button class="btn btn-logout" onclick="logout()"
                    style="background:none; color:white; border:1px solid #555; cursor:pointer; padding: 10px; border-radius: 8px;">Logout</button>
            </div>
        </nav>

        <div class="stats-bar">
            <div class="stat-card">
                <h4>Books Available</h4>
                <p id="stat-books">0</p>
            </div>
            <div class="stat-card">
                <h4>Total Value</h4>
                <p>$<span id="stat-value">0</span></p>
            </div>
            <div class="stat-card">
                <h4>Active Members</h4>
                <p>1,248</p>
            </div>
            <div class="stat-card">
                <h4>Genre Variety</h4>
                <p id="stat-genres">0</p>
            </div>
        </div>

        <div class="admin-section animate-in">
            <h3 style="margin-top:0"><span style="border-bottom: 2px solid var(--accent)">Librarian Terminal:</span>
                List New Volume</h3>
            <div class="input-grid">
                <input type="text" id="title" placeholder="Book Title">
                <input type="text" id="author" placeholder="Author Name">
                <input type="number" id="price" placeholder="Retail Price ($)">
                <input type="number" id="stock" placeholder="Stock Qty">
                <select id="genre">
                    <option value="Fiction">Fiction</option>
                    <option value="Non-Fiction">Non-Fiction</option>
                    <option value="Science">Science</option>
                    <option value="History">History</option>
                    <option value="Mystery">Mystery</option>
                </select>
                <select id="rating">
                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (Classic)</option>
                    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê (Recommended)</option>
                    <option value="3">‚≠ê‚≠ê‚≠ê (Good)</option>
                </select>
            </div>
            <textarea id="description" placeholder="Write a captivating summary of the book..."
                style="width:100%; height: 80px; margin-bottom: 15px;"></textarea>
            <button class="btn btn-accent" onclick="addBook()">+ Publish to Marketplace</button>
        </div>

        <div class="filters animate-in">
            <input type="text" id="search" placeholder="Search by title, author, or genre..." onkeyup="renderBooks()"
                style="flex-grow: 1; border-radius: 30px; padding: 15px 25px;">
            <select id="filter-genre" onchange="renderBooks()" style="border-radius: 30px; width: 200px;">
                <option value="all">All Genres</option>
                <option value="Fiction">Fiction</option>
                <option value="Non-Fiction">Non-Fiction</option>
                <option value="Science">Science</option>
            </select>
        </div>

        <div id="bookList" class="book-grid"></div>

        <div class="reading-goal animate-in">
            <h3>Your 2026 Reading Journey</h3>
            <p>You've read 12 out of 25 books this year! Keep going.</p>
            <div class="progress-container">
                <div class="progress-bar"></div>
            </div>
        </div>

        <footer style="margin-top: 50px; text-align: center; color: #666; padding-bottom: 30px;">
            <hr style="border: 0; border-top: 1px solid #333; margin-bottom: 20px;">
            &copy; 2026 LibroMarket Professional Library Systems. All Rights Reserved.
        </footer>
    </div>

    <div id="cart-panel">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2 style="margin:0">Your Collection</h2>
            <button onclick="toggleCart()"
                style="background:none; border:none; color:white; font-size: 2em; cursor:pointer">&times;</button>
        </div>

        <div id="cart-items" style="max-height: 60vh; overflow-y: auto;"></div>

        <div style="position: absolute; bottom: 40px; left: 40px; right: 40px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                <span style="font-size: 1.2em;">Total Payable:</span>
                <span style="font-size: 1.5em; color: var(--accent); font-weight: bold;">$<span
                        id="cart-total">0.00</span></span>
            </div>
            <button class="btn btn-cart" onclick="checkout()" style="padding: 18px;">Confirm Order & Pay</button>
            <p style="font-size: 0.8em; color: #666; text-align: center; margin-top: 15px;">Encrypted SSL Checkout
                Secured</p>
        </div>
    </div>

    <script>
        // Data Persistence
        let marketplace = JSON.parse(localStorage.getItem('libroMarket')) || [
            { id: 101, title: "The Great Gatsby", author: "F. Scott Fitzgerald", price: "15.99", stock: 5, rating: 5, genre: "Fiction", description: "A story of wealth, love, and the American Dream." },
            { id: 102, title: "Brief Answers to Big Questions", author: "Stephen Hawking", price: "22.50", stock: 3, rating: 5, genre: "Science", description: "The final book from the world's most brilliant mind." }
        ];

        let cart = [];
        let currentUser = localStorage.getItem('loggedUser');
        let isLoginMode = true;

        // --- Authentication Logic ---
        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            document.getElementById('auth-title').innerText = isLoginMode ? "Welcome Back" : "Create Account";
            document.getElementById('auth-btn').innerText = isLoginMode ? "Login to Library" : "Create Free Account";
            document.getElementById('toggle-link').innerText = isLoginMode ? "Need an account? Join the Club" : "Already have an account? Login";
        }

        function handleAuth() {
            const user = document.getElementById('auth-user').value;
            const pass = document.getElementById('auth-pass').value;
            if (!user || !pass) return alert("Please provide valid credentials.");

            if (isLoginMode) {
                localStorage.setItem('loggedUser', user);
                initApp(user);
            } else {
                alert("Account registered successfully! Please login to continue.");
                toggleAuthMode();
            }
        }

        function initApp(user) {
            document.getElementById('auth-overlay').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            document.getElementById('welcome-msg').innerText = `Librarian: ${user}`;
            updateStats();
            renderBooks();
        }

        function logout() {
            localStorage.removeItem('loggedUser');
            location.reload();
        }

        // --- Library Marketplace Logic ---
        function updateStats() {
            document.getElementById('stat-books').innerText = marketplace.length;
            const totalVal = marketplace.reduce((acc, curr) => acc + (parseFloat(curr.price) * curr.stock), 0);
            document.getElementById('stat-value').innerText = totalVal.toLocaleString(undefined, { minimumFractionDigits: 2 });

            const genres = [...new Set(marketplace.map(b => b.genre))];
            document.getElementById('stat-genres').innerText = genres.length;
        }

        function addBook() {
            const title = document.getElementById('title').value;
            const author = document.getElementById('author').value;
            const price = document.getElementById('price').value;
            const stock = document.getElementById('stock').value;
            const rating = document.getElementById('rating').value;
            const genre = document.getElementById('genre').value;
            const description = document.getElementById('description').value;

            if (title && author && price && stock) {
                marketplace.push({
                    id: Date.now(),
                    title,
                    author,
                    price: parseFloat(price).toFixed(2),
                    stock: parseInt(stock),
                    rating,
                    genre,
                    description: description || "No description provided for this volume."
                });
                saveData();
                updateStats();
                renderBooks();
                // Clear inputs
                ['title', 'author', 'price', 'stock', 'description'].forEach(id => document.getElementById(id).value = '');
            } else {
                alert("Please fill in the required book details.");
            }
        }

        // NEW: Remove functionality
        function removeBook(id) {
            if (confirm("Are you sure you want to remove this book from the library?")) {
                marketplace = marketplace.filter(b => b.id !== id);
                saveData();
                updateStats();
                renderBooks();
            }
        }

        function renderBooks() {
            const list = document.getElementById('bookList');
            const search = document.getElementById('search').value.toLowerCase();
            const genreFilter = document.getElementById('filter-genre').value;

            list.innerHTML = '';

            const filtered = marketplace.filter(b => {
                const matchesSearch = b.title.toLowerCase().includes(search) || b.author.toLowerCase().includes(search);
                const matchesGenre = genreFilter === 'all' || b.genre === genreFilter;
                return matchesSearch && matchesGenre;
            });

            filtered.forEach(book => {
                list.innerHTML += `
                <div class="book-card animate-in">
                    <span class="book-tag">${book.genre}</span>
                    <div>
                        <div style="color:var(--gold); margin-bottom: 5px;">${'‚òÖ'.repeat(book.rating)}</div>
                        <h3 style="margin: 5px 0; color: var(--accent)">${book.title}</h3>
                        <p style="font-style: italic; color: #ccc; margin-top: 0">by ${book.author}</p>
                        <p style="font-size:0.85em; color:#aaa; margin: 15px 0; min-height: 60px;">${book.description.substring(0, 120)}...</p>
                    </div>
                    <div>
                        <div style="font-size:1.6em; margin-bottom:10px; font-weight: bold">$${book.price}</div>
                        <div style="font-size:0.75em; color: ${book.stock < 3 ? 'var(--danger)' : '#888'}; margin-bottom: 10px">
                            Inventory Status: ${book.stock > 0 ? book.stock + ' units' : 'OUT OF STOCK'}
                        </div>
                        <button class="btn btn-cart" onclick="addToCart(${book.id})" ${book.stock <= 0 ? 'disabled' : ''}>
                            ${book.stock > 0 ? 'Reserve Copy' : 'Sold Out'}
                        </button>
                        <button class="btn btn-remove" onclick="removeBook(${book.id})">Remove from Library</button>
                    </div>
                </div>
            `;
            });
        }

        // --- Cart & Checkout Logic ---
        function toggleCart() {
            document.getElementById('cart-panel').classList.toggle('open');
        }

        function addToCart(id) {
            const book = marketplace.find(b => b.id === id);
            if (book && book.stock > 0) {
                cart.push({ ...book });
                updateCartUI();
                // Small animation hint
                document.getElementById('cart-count').style.transform = "scale(1.3)";
                setTimeout(() => document.getElementById('cart-count').style.transform = "scale(1)", 200);
            }
        }

        function updateCartUI() {
            const container = document.getElementById('cart-items');
            container.innerHTML = '';
            let total = 0;

            cart.forEach((item, index) => {
                total += parseFloat(item.price);
                container.innerHTML += `
                <div class="cart-item">
                    <div>
                        <div style="font-weight:bold">${item.title}</div>
                        <div style="font-size:0.8em; color:var(--accent)">${item.author}</div>
                    </div>
                    <div style="display:flex; align-items:center; gap:15px">
                        <span>$${item.price}</span>
                        <button onclick="removeFromCart(${index})" style="background:#441111; border:none; color:white; padding: 5px 10px; border-radius: 5px; cursor:pointer">‚úï</button>
                    </div>
                </div>
            `;
            });

            document.getElementById('cart-total').innerText = total.toFixed(2);
            document.getElementById('cart-count').innerText = cart.length;
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }

        function checkout() {
            if (cart.length === 0) return alert("Your cart is currently empty.");

            cart.forEach(cartItem => {
                const book = marketplace.find(b => b.id === cartItem.id);
                if (book) book.stock -= 1;
            });

            alert("Transaction successful! Your volumes have been checked out.");
            cart = [];
            updateCartUI();
            saveData();
            updateStats();
            renderBooks();
            toggleCart();
        }

        function saveData() {
            localStorage.setItem('libroMarket', JSON.stringify(marketplace));
        }

        // Auto-login check
        if (currentUser) initApp(currentUser);

    </script>
</body>

</html>